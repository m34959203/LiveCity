# LiveCity — Спецификация MVP (Demo v0.1)

**Цель документа:** Определить минимальный объём функций для первой публичной демонстрации.
**Дата:** 2026-02-18
**Целевая дата демо:** ~4-6 недель от начала разработки

---

## 1. Цель демонстрации

Показать инвесторам/партнёрам работающий прототип, который:
- Отображает карту города с заведениями и их Live Score
- Позволяет искать заведения на естественном языке через AI
- Визуализирует тепловую карту активности
- Даёт бизнесу базовый дашборд с аналитикой

**Демо-сценарий (2 минуты):**
> «Я турист в Алматы. Открываю LiveCity — вижу карту с живыми точками. Спрашиваю: "Где вкусный плов в тихом месте с парковкой?" — AI выдаёт 3 лучших варианта с Live Score. Нажимаю на место — вижу карточку с реальным рейтингом, фото, ссылку на WhatsApp. Переключаюсь на тепловую карту — вижу, где сейчас движуха.»

---

## 2. Scope демо-версии

### IN SCOPE (делаем)

| # | Фича | Источник (Vision) | Приоритет |
|---|---|---|---|
| F1 | Интерактивная карта с заведениями | — | P0 (must) |
| F2 | Live Score для каждого заведения | B2C 2.1 | P0 (must) |
| F3 | Semantic AI Search | B2C 2.2 | P0 (must) |
| F4 | Тепловая карта активности | B2C 2.4 | P1 (should) |
| F5 | Карточка заведения (детали) | — | P0 (must) |
| F6 | Бизнес-дашборд (базовый) | B2B 3.1 | P1 (should) |
| F7 | Кнопка Direct Connect (WhatsApp) | B2B 3.3 | P2 (nice) |

### OUT OF SCOPE (не делаем для демо)

| Фича | Причина |
|---|---|
| AI Planner (PRO) | Слишком сложно для MVP, post-demo |
| Spyglass (конкурентная разведка) | Требует массива данных, post-demo |
| The Hook (проактивное вовлечение) | Маркетинговая фича, не для демо |
| Авторизация/регистрация | Демо без аккаунтов, хардкод-юзер |
| Мобильное приложение | Демо в браузере, mobile — post-demo |
| Оплата/подписки | Не нужно для демо |
| Offline-режим | Backlog (Vision 4.1) |

---

## 3. Детальная спецификация фич

### F1: Интерактивная карта города

**Описание:** Полноэкранная карта с маркерами заведений. Центрирована на Алматы (демо-город).

**Требования:**
- Карта на весь экран с элементами управления (zoom, геолокация)
- Маркеры заведений с цветовой индикацией Live Score:
  - Зелёный (8-10): горячее место
  - Жёлтый (5-7): нормальная активность
  - Серый (0-4): мало активности
- Кластеризация маркеров при отдалении
- Плавные анимации при навигации

**Данные для демо:** 50-100 заведений Алматы (рестораны, кафе, парки, ТРЦ). Seed-данные в БД.

### F2: Live Score

**Описание:** Числовой рейтинг 0-10 для каждого заведения, основанный на «пульсе» реальной активности.

**Для демо (упрощённая модель):**
- Score = взвешенная формула из:
  - Количество недавних упоминаний в соцсетях (вес 0.4)
  - Средний sentiment отзывов за последние 7 дней (вес 0.3)
  - Активность в Google Maps (check-ins, фото) (вес 0.2)
  - Время суток / день недели (модификатор ±1) (вес 0.1)
- Для демо: значения генерируются на основе seed-данных + рандомизация с привязкой к времени
- Визуализация: круглый бейдж с числом и цветом

### F3: Semantic AI Search

**Описание:** Строка поиска, принимающая запросы на естественном языке.

**Требования:**
- Поисковая строка наверху карты
- Примеры запросов как placeholder/chips:
  - «Тихое кафе для работы с Wi-Fi»
  - «Где погулять с ребёнком в центре»
  - «Лучший шашлык рядом»
- Запрос уходит в Gemini API → возвращает отфильтрованный/ранжированный список
- Результаты отображаются как список карточек + маркеры на карте
- Время ответа: < 3 секунд (с индикатором загрузки)

**Техническая реализация:**
1. Пользовательский запрос + контекст заведений → Gemini API
2. Gemini возвращает JSON с ID подходящих заведений + причина выбора
3. Frontend отображает результаты

### F4: Тепловая карта

**Описание:** Слой на карте, показывающий концентрацию активности по районам.

**Требования:**
- Переключатель «Маркеры / Тепловая карта»
- Heatmap-слой Mapbox с градиентом (синий → жёлтый → красный)
- Данные: агрегация Live Score по геоточкам
- Для демо: статичный heatmap из seed-данных с лёгкой анимацией

### F5: Карточка заведения

**Описание:** Выезжающая панель с деталями при клике на маркер.

**Поля:**
- Название
- Категория (ресторан / кафе / парк / ТРЦ)
- Live Score (большой бейдж)
- Адрес
- Фото (1-3 штуки)
- Краткое AI-описание (сгенерированное)
- Часы работы
- Кнопка «Написать в WhatsApp» (F7)
- Теги: Wi-Fi, парковка, детская зона, терраса и др.

### F6: Бизнес-дашборд (базовый)

**Описание:** Отдельная страница `/dashboard` для владельца заведения.

**Для демо (хардкод для одного заведения):**
- График Live Score за 30 дней (линейный chart)
- Топ-3 жалобы за неделю (из AI-анализа)
- AI Action Plan: 3 рекомендации по улучшению
- Сравнение с средним по району

### F7: Direct Connect (WhatsApp)

**Описание:** Кнопка в карточке заведения, открывающая WhatsApp-чат с владельцем.

**Реализация:**
- Ссылка формата `https://wa.me/{phone}?text={encoded_message}`
- Предзаполненное сообщение: «Привет! Пишу из LiveCity по поводу [Название заведения]»

---

## 4. Пользовательские сценарии (User Flows)

### Flow 1: Поиск места (основной)
```
Открытие приложения
  → Карта с маркерами (F1)
  → Ввод запроса в поиск (F3)
  → AI возвращает результаты
  → Клик на маркер/карточку
  → Просмотр деталей (F5)
  → Клик «WhatsApp» (F7)
```

### Flow 2: Обзор активности
```
Открытие приложения
  → Карта с маркерами (F1)
  → Переключение на тепловую карту (F4)
  → Обзор горячих зон
  → Клик на зону
  → Zoom на район с маркерами
  → Выбор заведения
```

### Flow 3: Бизнес-аналитика
```
Переход на /dashboard (F6)
  → Просмотр Live Score графика
  → Чтение AI-рекомендаций
  → Просмотр топ-жалоб
```

---

## 5. Нефункциональные требования (для демо)

| Параметр | Требование |
|---|---|
| Время загрузки | < 3 сек (First Contentful Paint) |
| AI-ответ | < 5 сек |
| Браузеры | Chrome, Safari (desktop) |
| Мобильная адаптация | Responsive layout (не нативное приложение) |
| Данные | Seed: 50-100 заведений Алматы |
| Авторизация | Нет (open access для демо) |
| Язык интерфейса | Русский |

---

## 6. Критерии приёмки демо (Definition of Done)

- [ ] Карта загружается с маркерами заведений за < 3 секунд
- [ ] Live Score отображается на каждом маркере с цветовой индикацией
- [ ] AI-поиск обрабатывает запрос на русском языке и возвращает релевантные результаты
- [ ] Тепловая карта переключается и отображает зоны активности
- [ ] Карточка заведения показывает все поля (название, score, фото, адрес)
- [ ] Кнопка WhatsApp открывает мессенджер с предзаполненным текстом
- [ ] Бизнес-дашборд показывает график и AI-рекомендации
- [ ] Приложение работает стабильно в течение 5-минутной демонстрации
