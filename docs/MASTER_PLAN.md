# PROJECT MASTER PLAN: LiveCity

**Версия:** 1.0 (Final Concept)
**Тип продукта:** Hyper-Local Dynamic Guide & B2B Reputation SaaS
**Стек:** Next.js 15, Supabase, Vercel AI SDK, Mapbox.

---

## 1. Концепция и Миссия (Vision)

**Проблема:**
Классические карты (Google Maps, 2GIS) статичны. Рейтинг "4.5" может висеть годами, даже если кухня испортилась месяц назад. Туристы тратят часы на чтение отзывов. Бизнес не понимает причин оттока клиентов.

**Решение:**
**LiveCity** — это платформа, которая ранжирует места на основе «пульса» соцсетей в реальном времени.

* **Для Пользователя:** Это умный секретарь, который строит идеальный маршрут дня на основе *свежих* данных («Где хорошо сегодня?»).
* **Для Бизнеса:** Это инструмент диагностики («Почему я теряю клиентов?») и канал прямых продаж без посредников.

**Главный принцип:** Мы **НЕ агрегатор**. Мы не берем комиссию за бронь. Мы создаем прямой мост между клиентом и бизнесом.

---

## 2. Бизнес-Модель (Monetization)

### B2C: Модель для Пользователей (Subscription)

* **Freemium:** Доступ к «Живому рейтингу», карте и поиску.
* **Premium ($2-5/мес):**
  * **AI-Маршрут дня:** Построение сложной логистики с учетом состава семьи/компании.
  * **Smart Filters:** Доступ к категориям «Скрытые жемчужины».
  * **Offline Mode:** Работа без интернета.
* **Trial:** 14 дней полного доступа бесплатно.

### B2B: Модель для Бизнеса (SaaS)

* **Free (Наблюдатель):**
  * Видит свой `Live Score`.
  * Видит наличие жалоб (текст размыт/blur).
  * Кнопка «WhatsApp» в профиле.

* **Pro (Управляющий - $20-30/мес):**
  * **Deep Analytics:** Полный текст жалоб, сгруппированный ИИ.
  * **Competitor Watch:** Сравнение с конкурентами.
  * **CRM-Lite:** Модуль приема заявок на бронь внутри приложения.
  * **Weekly Action Plan:** Еженедельный чек-лист от ИИ.

---

## 3. Ключевой Функционал (Features)

### 3.1. Алгоритм "Live Score" (Ядро)

* **Freshness:** Отзыв за 24ч имеет вес x2.0. Отзыв > 30 дней имеет вес x0.1.
* **Decay (Затухание):** Если место не упоминают в соцсетях 14 дней, рейтинг начинает падать.
* **Источники:** Instagram (Reels/Stories text), TikTok, Google Maps (text).

### 3.2. Семантический Поиск (Vector Search)

Пользователь пишет: *"Хочу сочный шашлык на природе с детьми, чтобы можно было купаться"*.
Система ищет не по словам, а по векторам:

1. **Safety:** Исключает места с тегами `#дикий_пляж`, `#опасно`.
2. **Vibe:** Ищет `#family_friendly`, `#bbq_allowed`.
3. **Logistics:** Находит магазины по пути.

### 3.3. Direct Booking System (Без агрегаторов)

* **Unclaimed:** Кнопка "Позвонить" (телефон из открытых источников).
* **Claimed:**
  * Кнопка "WhatsApp": Открывает чат с заготовленным текстом.
  * Кнопка "Запрос брони" (Pro): Владелец получает заявку в админку.

---

## 4. Архитектура

### Data Engine (Backend/Cron)

* **Scraper:** Собирает тексты постов по геотегам.
* **AI Analyzer (LLM):** Определяет тональность (-1..1), выделяет теги, формирует `ai_summary`.

### Client App (Next.js)

* **Map Interface:** Mapbox GL. Маркеры меняют цвет/размер в зависимости от `Live Score`.
* **User Profile:** Хранит настройки (Дети, Животные, Авто).
* **Business Dashboard:** Графики (Recharts), Канбан-доска заявок (CRM).

### Database (Supabase)

* `venues`: Геоданные, описание, owner_id, vector embeddings.
* `reviews_analyzed`: Обработанные данные для рейтинга.
* `bookings`: Таблица заявок (status: pending/accepted/rejected).

---

## 5. Roadmap

### Этап 1: Фундамент (MVP Week 1)
Развернуть Next.js + Supabase. БД с таблицами venues, users, reviews.

### Этап 2: Сбор и Анализ (MVP Week 1-2)
Data Pipeline. Edge Function для анализа тональности и обновления live_score.

### Этап 3: Поиск и Маршруты (MVP Week 2-3)
Векторный поиск и UI карты. Семантический поиск мест через Mapbox.

### Этап 4: Бизнес-часть (MVP Week 3-4)
CRM для заявок и Дашборд владельца бизнеса.
